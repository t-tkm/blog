<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
  
  <title>AWS App2Container(ãŠè©¦ã—ç·¨)</title>
  <meta property="og:title" content="AWS App2Container(ãŠè©¦ã—ç·¨)" />
  <meta name="twitter:title" content="AWS App2Container(ãŠè©¦ã—ç·¨)" />
  

  

  <meta name="author" content="Takumi Tomita"/>
  <meta property="og:site_name" content="Takumi Tomita&#39;s Blog" />
  <meta property="og:url" content="https://t-tkm.github.io/blog/posts/2022/03/aws_app2container/" />

  
  <meta name="twitter:card" content="summary" />

  
  <meta name="twitter:site" content="@t_tkm0911" />
  <meta name="twitter:creator" content="@t_tkm0911" />
  

  
  <meta property="og:type" content="article" />
  
  <meta property="og:article:author" content="https://facebook.com/takumi.tomita.vf" />
  
  
  
  <meta name="generator" content="Hugo 0.79.1" />
  
  

  <link rel="stylesheet" href="https://t-tkm.github.io/blog/css/style.css" />
  
  
  
  <script type="text/javascript" src="https://t-tkm.github.io/blog/js/bundle.js"></script>
  

</head>

<body>
  <a href="#main" class="skip-link p-screen-reader-text">Skip to content</a>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;" aria-hidden="true"> <symbol id="icon-500px" viewBox="0 0 16 16"><g> <path d="M3.953 10.512a5.24 5.24 0 0 0 6.996 3.141c.625-.262 1.184-.641 1.666-1.122s.859-1.041 1.122-1.666c.272-.647.412-1.331.412-2.037s-.137-1.394-.412-2.037c-.262-.625-.641-1.184-1.122-1.666s-1.041-.859-1.666-1.122a5.226 5.226 0 0 0-2.037-.413c-.716 0-1.431.144-2.066.413-.509.216-1.372.769-1.875 1.291l-.003.003V.984h7.241c.262-.003.262-.372.262-.491 0-.122 0-.487-.266-.491H4.377a.343.343 0 0 0-.344.341v6.066c0 .197.244.338.472.384.444.094.544-.047.653-.197l.016-.019c.166-.247.681-.766.688-.772a4.262 4.262 0 0 1 3.037-1.25c1.147 0 2.222.444 3.028 1.25a4.245 4.245 0 0 1 1.256 3.019 4.236 4.236 0 0 1-1.25 3.019 4.336 4.336 0 0 1-3.047 1.25 4.136 4.136 0 0 1-2.159-.597l.003-3.688c0-.491.213-1.028.572-1.431a2.09 2.09 0 0 1 1.588-.716c.594 0 1.15.225 1.566.634.409.406.637.95.637 1.528a2.179 2.179 0 0 1-2.206 2.197c-.238 0-.672-.106-.691-.109-.25-.075-.356.272-.391.387-.134.441.069.528.109.541.397.125.659.147 1.003.147a3.173 3.173 0 0 0 3.169-3.169c0-1.734-1.422-3.144-3.166-3.144-.856 0-1.659.328-2.263.919-.575.566-.903 1.319-.903 2.069v.019c-.003.094-.003 2.306-.006 3.031l-.003-.003c-.328-.363-.653-.919-.869-1.488-.084-.222-.275-.184-.534-.103-.125.034-.469.141-.391.394zm3.722-.865c0 .106.097.2.156.253l.019.019c.1.097.194.147.281.147a.181.181 0 0 0 .131-.05c.044-.041.537-.544.588-.591l.553.55c.05.056.106.088.172.088.088 0 .184-.053.284-.156.238-.244.119-.375.063-.438l-.559-.559.584-.588c.128-.137.016-.284-.097-.397-.162-.162-.322-.206-.422-.112l-.581.581-.588-.588a.16.16 0 0 0-.113-.047c-.078 0-.172.053-.275.156-.181.181-.219.306-.125.406l.588.584-.584.584c-.053.05-.078.103-.075.156zm1.278-7.931c-.938 0-1.938.191-2.669.506a.207.207 0 0 0-.134.181.753.753 0 0 0 .069.337c.047.116.166.425.4.334a6.689 6.689 0 0 1 2.334-.444 6.35 6.35 0 0 1 2.469.497c.622.263 1.206.644 1.844 1.194a.22.22 0 0 0 .147.059c.125 0 .244-.122.347-.237.169-.191.287-.35.119-.509a6.858 6.858 0 0 0-2.1-1.356 7.326 7.326 0 0 0-2.825-.563zM14.006 13.3c-.113-.113-.209-.178-.294-.203s-.162-.006-.222.053l-.056.056a6.32 6.32 0 0 1-6.938 1.356 6.336 6.336 0 0 1-2.013-1.356 6.046 6.046 0 0 1-1.356-2.012c-.288-.713-.381-1.247-.413-1.422-.003-.016-.006-.028-.006-.037-.041-.206-.231-.222-.503-.178-.112.019-.459.072-.428.319v.006a7.261 7.261 0 0 0 2.04 3.994 7.266 7.266 0 0 0 10.288 0l.059-.059c.069-.084.134-.225-.159-.516z"/> </g></symbol> <symbol id="icon-codepen" viewBox="0 0 16 16"><g> <path d="M14.777 5.751l-7-4.667a.5.5 0 0 0-.555 0l-7 4.667a.501.501 0 0 0-.223.416v4.667c0 .167.084.323.223.416l7 4.667a.5.5 0 0 0 .554 0l7-4.667a.501.501 0 0 0 .223-.416V6.167a.501.501 0 0 0-.223-.416zM7.5 10.232L4.901 8.5 7.5 6.768 10.099 8.5 7.5 10.232zM8 5.899V2.434l5.599 3.732L11 7.898l-3-2zm-1 0l-3 2-2.599-1.732L7 2.435V5.9zM3.099 8.5L1 9.899V7.101L3.099 8.5zM4 9.101l3 2v3.465l-5.599-3.732L4 9.102zm4 2l3-2 2.599 1.732L8 14.565V11.1zM11.901 8.5L14 7.101v2.798L11.901 8.5z"/> </g></symbol> <symbol id="icon-dribbble" viewBox="0 0 16 16"><g> <path d="M8 16c-4.412 0-8-3.588-8-8s3.587-8 8-8c4.412 0 8 3.587 8 8s-3.588 8-8 8zm6.747-6.906c-.234-.075-2.116-.634-4.256-.291a29.7 29.7 0 0 1 1.328 4.872 6.845 6.845 0 0 0 2.928-4.581zM10.669 14.3c-.103-.6-.497-2.688-1.456-5.181-.016.006-.031.009-.044.016-3.856 1.344-5.241 4.016-5.362 4.266a6.807 6.807 0 0 0 6.863.9zm-7.747-1.722c.156-.266 2.031-3.369 5.553-4.509a7.04 7.04 0 0 1 .269-.081 24.04 24.04 0 0 0-.553-1.159c-3.409 1.022-6.722.978-7.022.975-.003.069-.003.138-.003.209 0 1.753.666 3.356 1.756 4.566zM1.313 6.609c.306.003 3.122.016 6.319-.831a43.092 43.092 0 0 0-2.534-3.953 6.854 6.854 0 0 0-3.784 4.784zM6.4 1.366a36.612 36.612 0 0 1 2.55 4c2.431-.909 3.459-2.294 3.581-2.469A6.799 6.799 0 0 0 6.4 1.366zm6.891 2.325c-.144.194-1.291 1.663-3.816 2.694.159.325.313.656.453.991.05.119.1.234.147.353 2.275-.284 4.534.172 4.759.219a6.816 6.816 0 0 0-1.544-4.256z"/> </g></symbol> <symbol id="icon-facebook" viewBox="0 0 16 16"><g> <path d="M9.5 3H12V0H9.5C7.57 0 6 1.57 6 3.5V5H4v3h2v8h3V8h2.5l.5-3H9V3.5c0-.271.229-.5.5-.5z"/> </g></symbol> <symbol id="icon-feed" viewBox="0 0 16 16"><g> <path d="M2.13 11.733c-1.175 0-2.13.958-2.13 2.126 0 1.174.955 2.122 2.13 2.122a2.126 2.126 0 0 0 2.133-2.122 2.133 2.133 0 0 0-2.133-2.126zM.002 5.436v3.067c1.997 0 3.874.781 5.288 2.196a7.45 7.45 0 0 1 2.192 5.302h3.08c0-5.825-4.739-10.564-10.56-10.564zM.006 0v3.068C7.128 3.068 12.924 8.87 12.924 16H16C16 7.18 8.824 0 .006 0z"/> </g></symbol> <symbol id="icon-flickr" viewBox="0 0 16 16"><g> <path d="M0 8.5a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0zm9 0a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/> </g></symbol> <symbol id="icon-github" viewBox="0 0 16 16"><g> <path d="M8 .198a8 8 0 0 0-2.529 15.591c.4.074.547-.174.547-.385 0-.191-.008-.821-.011-1.489-2.226.484-2.695-.944-2.695-.944-.364-.925-.888-1.171-.888-1.171-.726-.497.055-.486.055-.486.803.056 1.226.824 1.226.824.714 1.223 1.872.869 2.328.665.072-.517.279-.87.508-1.07-1.777-.202-3.645-.888-3.645-3.954 0-.873.313-1.587.824-2.147-.083-.202-.357-1.015.077-2.117 0 0 .672-.215 2.201.82A7.672 7.672 0 0 1 8 4.066c.68.003 1.365.092 2.004.269 1.527-1.035 2.198-.82 2.198-.82.435 1.102.162 1.916.079 2.117.513.56.823 1.274.823 2.147 0 3.073-1.872 3.749-3.653 3.947.287.248.543.735.543 1.481 0 1.07-.009 1.932-.009 2.195 0 .213.144.462.55.384A8 8 0 0 0 8.001.196z"/> </g></symbol> <symbol id="icon-gitlab" viewBox="0 0 28 28"><g> <path d="M1.625 11.031L14 26.89.437 17.046a1.092 1.092 0 0 1-.391-1.203l1.578-4.813zm7.219 0h10.313L14.001 26.89zM5.75 1.469l3.094 9.562H1.625l3.094-9.562a.548.548 0 0 1 1.031 0zm20.625 9.562l1.578 4.813a1.09 1.09 0 0 1-.391 1.203l-13.563 9.844 12.375-15.859zm0 0h-7.219l3.094-9.562a.548.548 0 0 1 1.031 0z"/> </g></symbol> <symbol id="icon-google-plus" viewBox="0 0 16 16"><g> <path d="M5.091 7.147v1.747h2.888c-.116.75-.872 2.197-2.888 2.197-1.737 0-3.156-1.441-3.156-3.216s1.419-3.216 3.156-3.216c.991 0 1.65.422 2.028.784L8.5 4.112c-.888-.828-2.037-1.331-3.409-1.331C2.275 2.784 0 5.059 0 7.875s2.275 5.091 5.091 5.091c2.937 0 4.888-2.066 4.888-4.975 0-.334-.037-.591-.081-.844H5.092zM16 7h-1.5V5.5H13V7h-1.5v1.5H13V10h1.5V8.5H16z"/> </g></symbol> <symbol id="icon-instagram" viewBox="0 0 22 22"><g> <path d="M15.445 0H6.554A6.559 6.559 0 0 0 0 6.554v8.891A6.559 6.559 0 0 0 6.554 22h8.891a6.56 6.56 0 0 0 6.554-6.555V6.554A6.557 6.557 0 0 0 15.445 0zm4.342 15.445a4.343 4.343 0 0 1-4.342 4.342H6.554a4.341 4.341 0 0 1-4.341-4.342V6.554a4.34 4.34 0 0 1 4.341-4.341h8.891a4.342 4.342 0 0 1 4.341 4.341l.001 8.891z"/> <path d="M11 5.312A5.693 5.693 0 0 0 5.312 11 5.694 5.694 0 0 0 11 16.688 5.694 5.694 0 0 0 16.688 11 5.693 5.693 0 0 0 11 5.312zm0 9.163a3.475 3.475 0 1 1-.001-6.95 3.475 3.475 0 0 1 .001 6.95zm5.7-10.484a1.363 1.363 0 1 1-1.364 1.364c0-.752.51-1.364 1.364-1.364z"/> </g></symbol> <symbol id="icon-linkedin" viewBox="0 0 16 16"><g> <path d="M6 6h2.767v1.418h.04C9.192 6.727 10.134 6 11.539 6 14.46 6 15 7.818 15 10.183V15h-2.885v-4.27c0-1.018-.021-2.329-1.5-2.329-1.502 0-1.732 1.109-1.732 2.255V15H6V6zM1 6h3v9H1V6zM4 3.5a1.5 1.5 0 1 1-3.001-.001A1.5 1.5 0 0 1 4 3.5z"/> </g></symbol> <symbol id="icon-mail" viewBox="0 0 22 18"><g> <path fill="#000" d="M0 17.225V.776h22v16.447H0v.002zm3.011-1.815h15.978l-5.111-5.115L11 13.179l-2.877-2.883-5.112 5.114zm-1.216-1.275l5.077-5.09L1.795 3.98v10.155zm13.332-5.09l5.079 5.09V3.979l-5.079 5.066zm-4.126 1.588l8.022-8.027-16.045-.001 8.023 8.028z"/> </g></symbol> <symbol id="icon-medium" viewBox="0 0 24 24"><g> <path d="M22.085 4.733L24 2.901V2.5h-6.634l-4.728 11.768L7.259 2.5H.303v.401L2.54 5.594c.218.199.332.49.303.783V16.96c.069.381-.055.773-.323 1.05L0 21.064v.396h7.145v-.401l-2.52-3.049a1.244 1.244 0 0 1-.347-1.05V7.806l6.272 13.659h.729l5.393-13.659v10.881c0 .287 0 .346-.188.534l-1.94 1.877v.402h9.412v-.401l-1.87-1.831a.556.556 0 0 1-.214-.534V5.267a.554.554 0 0 1 .213-.534z"/> </g></symbol> <symbol id="icon-npm" viewBox="0 0 16 16"><g> <path d="M0 0v16h16V0H0zm13 13h-2V5H8v8H3V3h10v10z"/> </g></symbol> <symbol id="icon-pinterest" viewBox="0 0 16 16"><g> <path d="M8 1.069a6.93 6.93 0 0 0-2.525 13.384c-.059-.547-.116-1.391.025-1.988.125-.541.813-3.444.813-3.444s-.206-.416-.206-1.028c0-.963.559-1.684 1.253-1.684.591 0 .878.444.878.975 0 .594-.378 1.484-.575 2.306-.166.691.344 1.253 1.025 1.253 1.231 0 2.178-1.3 2.178-3.175 0-1.659-1.194-2.819-2.894-2.819-1.972 0-3.128 1.478-3.128 3.009 0 .597.228 1.234.516 1.581.056.069.066.128.047.2a95.89 95.89 0 0 1-.194.787c-.031.128-.1.153-.231.094-.866-.403-1.406-1.669-1.406-2.684 0-2.188 1.587-4.194 4.578-4.194 2.403 0 4.272 1.712 4.272 4.003 0 2.388-1.506 4.313-3.597 4.313-.703 0-1.362-.366-1.588-.797 0 0-.347 1.322-.431 1.647-.156.603-.578 1.356-.862 1.816a6.93 6.93 0 0 0 8.984-6.622 6.931 6.931 0 0 0-6.931-6.934z"/> </g></symbol> <symbol id="icon-search" viewBox="0 0 16 16"><g> <path d="M15.504 13.616l-3.79-3.223c-.392-.353-.811-.514-1.149-.499a6 6 0 1 0-.672.672c-.016.338.146.757.499 1.149l3.223 3.79c.552.613 1.453.665 2.003.115s.498-1.452-.115-2.003zM6 10a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"/> </g></symbol> <symbol id="icon-strava" viewBox="0 0 24 24"><g> <path d="M15.387 17.944l-2.089-4.116h-3.065L15.387 24l5.15-10.172h-3.066m-7.008-5.599l2.836 5.598h4.172L10.463 0l-7 13.828h4.169"/> </g></symbol> <symbol id="icon-tumblr" viewBox="0 0 16 16"><g> <path d="M9.001 7v3.659c0 .928-.012 1.463.086 1.727.098.262.342.534.609.691.354.212.758.318 1.214.318.81 0 1.289-.107 2.09-.633v2.405a9.089 9.089 0 0 1-1.833.639A7.93 7.93 0 0 1 9.369 16a4.9 4.9 0 0 1-1.725-.276 4.195 4.195 0 0 1-1.438-.79c-.398-.343-.672-.706-.826-1.091s-.23-.944-.23-1.676V6.556H3.003V4.29c.628-.204 1.331-.497 1.778-.877a4.386 4.386 0 0 0 1.08-1.374C6.133 1.505 6.32.825 6.422 0h2.579v4H13v3H9.001z"/> </g></symbol> <symbol id="icon-twitter" viewBox="0 0 16 16"><g> <path d="M16 3.538a6.461 6.461 0 0 1-1.884.516 3.301 3.301 0 0 0 1.444-1.816 6.607 6.607 0 0 1-2.084.797 3.28 3.28 0 0 0-2.397-1.034 3.28 3.28 0 0 0-3.197 4.028 9.321 9.321 0 0 1-6.766-3.431 3.284 3.284 0 0 0 1.015 4.381A3.301 3.301 0 0 1 .643 6.57v.041A3.283 3.283 0 0 0 3.277 9.83a3.291 3.291 0 0 1-1.485.057 3.293 3.293 0 0 0 3.066 2.281 6.586 6.586 0 0 1-4.862 1.359 9.286 9.286 0 0 0 5.034 1.475c6.037 0 9.341-5.003 9.341-9.341 0-.144-.003-.284-.009-.425a6.59 6.59 0 0 0 1.637-1.697z"/> </g></symbol> <symbol id="icon-vimeo" viewBox="0 0 16 16"><g> <path d="M15.994 4.281c-.072 1.556-1.159 3.691-3.263 6.397-2.175 2.825-4.016 4.241-5.522 4.241-.931 0-1.722-.859-2.366-2.581-.431-1.578-.859-3.156-1.291-4.734-.478-1.722-.991-2.581-1.541-2.581-.119 0-.538.253-1.256.753l-.753-.969c.791-.694 1.569-1.388 2.334-2.081 1.053-.909 1.844-1.387 2.372-1.438 1.244-.119 2.013.731 2.3 2.553.309 1.966.525 3.188.647 3.666.359 1.631.753 2.447 1.184 2.447.334 0 .838-.528 1.509-1.588.669-1.056 1.028-1.862 1.078-2.416.097-.912-.262-1.372-1.078-1.372a2.98 2.98 0 0 0-1.184.263c.787-2.575 2.287-3.825 4.506-3.753 1.641.044 2.416 1.109 2.322 3.194z"/> </g></symbol> <symbol id="icon-wordpress" viewBox="0 0 16 16"><g> <path d="M2 8c0 2.313 1.38 4.312 3.382 5.259L2.52 5.622A5.693 5.693 0 0 0 2 8zm10.05-.295c0-.722-.266-1.222-.495-1.612-.304-.482-.589-.889-.589-1.371 0-.537.418-1.037 1.008-1.037.027 0 .052.003.078.005A6.064 6.064 0 0 0 8 2.156 6.036 6.036 0 0 0 2.987 4.79c.141.004.274.007.386.007.627 0 1.599-.074 1.599-.074.323-.018.361.444.038.482 0 0-.325.037-.687.055l2.185 6.33 1.313-3.835-.935-2.495a12.304 12.304 0 0 1-.629-.055c-.323-.019-.285-.5.038-.482 0 0 .991.074 1.58.074.627 0 1.599-.074 1.599-.074.323-.018.362.444.038.482 0 0-.326.037-.687.055l2.168 6.282.599-1.947c.259-.809.457-1.389.457-1.889zm-3.945.806l-1.8 5.095a6.148 6.148 0 0 0 3.687-.093.52.52 0 0 1-.043-.081L8.105 8.511zm5.16-3.315c.026.186.04.386.04.601 0 .593-.114 1.259-.456 2.093l-1.833 5.16c1.784-1.013 2.983-2.895 2.983-5.051a5.697 5.697 0 0 0-.735-2.803zM8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm0 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14z"/> </g></symbol> <symbol id="icon-youtube" viewBox="0 0 16 16"><g> <path d="M15.841 4.8s-.156-1.103-.637-1.587c-.609-.637-1.291-.641-1.603-.678-2.237-.163-5.597-.163-5.597-.163h-.006s-3.359 0-5.597.163c-.313.038-.994.041-1.603.678C.317 3.697.164 4.8.164 4.8S.005 6.094.005 7.391v1.213c0 1.294.159 2.591.159 2.591s.156 1.103.634 1.588c.609.637 1.409.616 1.766.684 1.281.122 5.441.159 5.441.159s3.363-.006 5.6-.166c.313-.037.994-.041 1.603-.678.481-.484.637-1.588.637-1.588s.159-1.294.159-2.591V7.39c-.003-1.294-.162-2.591-.162-2.591zm-9.494 5.275V5.578l4.322 2.256-4.322 2.241z"/> </g></symbol></svg>
  <header class="l-header">
    
    <p class="c-title p-title"><a href="https://t-tkm.github.io/blog/" class="p-title__link">Takumi Tomita&#39;s Blog</a></p>
    
    
  </header>

  <main id="main" class="l-main">


<article class="p-article">
  <header>
    <h1>AWS App2Container(ãŠè©¦ã—ç·¨)</h1>
    <div>
      
        <div class="c-time">
          Posted on
<time datetime="2022-03-12T00:00:00&#43;09:00">
  Mar 12, 2022
</time>

        </div>
      
      
      <a href="https://t-tkm.github.io/blog/tags/aws" class="c-tag">AWS</a>
      
      <a href="https://t-tkm.github.io/blog/tags/container" class="c-tag">Container</a>
      
      <a href="https://t-tkm.github.io/blog/tags/ecs" class="c-tag">ECS</a>
      
      <a href="https://t-tkm.github.io/blog/tags/eks" class="c-tag">EKS</a>
      
      <a href="https://t-tkm.github.io/blog/tags/app2container" class="c-tag">App2Container</a>
      
    </div>
  </header>
  
  <section id="js-article" class="p-article__body">
    <h1 id="ã¯ã˜ã‚ã«">ã¯ã˜ã‚ã«</h1>
<p>AWS App2Containerã¯ã€èµ·å‹•ä¸­ã®javaã‚¢ãƒ—ãƒªã‚’ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã«å¤‰æ›ã—ã€ECSã‚„EKSã§ç¨¼åƒã•ã›ã‚‹ãŸã‚ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ç”Ÿæˆã™ã‚‹ãƒ„ãƒ¼ãƒ«ã«ãªã‚Šã¾ã™ã€‚</p>
<p><a href="https://aws.amazon.com/jp/blogs/architecture/accelerating-your-migration-to-aws/">Accelerating your Migration to AWS</a></p>
<figure><a href="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img4.png">
    <img src="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img4.png"
         alt="img4"/> </a>
</figure>

<p>ä¸‹è¨˜ã€App2Containerã®UerGuideã«ã‚ã‚‹é€šã‚Šã€ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¨ã€ãã†ã§ãªã„å ´åˆã§æŒ™å‹•ãŒå¤‰ã‚ã‚‹ãŸã‚ã€æœ¬è¨˜äº‹ã§ã¯ãã®è¾ºã‚’è©¦ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™(ã“ã“ã§ã¯ã€ECSã‚„EKSã§ã®ç¨¼åƒæ¤œè¨¼ã¯å«ã¾ã‚Œã¾ã›ã‚“)ã€‚</p>
<blockquote>
<p>For supported application frameworks, App2Container targets only the application files and dependencies that are needed for containerization, thereby minimizing the size of the resulting container image. This is known as application mode.</p>
</blockquote>
<blockquote>
<p>If App2Container does not find a supported framework running on your application server, or if you have other dependent processes running on your server, App2Container takes a conservative approach to identifying dependencies. This is known as process mode. For process mode, all non-system files on the application server are included in the container image.</p>
</blockquote>
<p>æœ¬è¨˜äº‹ã®ã‚¹ã‚³ãƒ¼ãƒ—ã¯ä¸‹è¨˜ã«ãªã‚Šã¾ã™ã€‚
<figure><a href="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img19.png">
    <img src="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img19.png"
         alt="img19"/> </a>
</figure>
</p>
<p>ä»¥é™ã€æ¬¡ã®æµã‚Œã§æ¤œè¨¼ã—ã¾ã™ã€‚</p>
<ul>
<li>App2Containerã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&amp;ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</li>
<li>Tomcatã‚¢ãƒ—ãƒªæº–å‚™</li>
<li>SpringBootã‚¢ãƒ—ãƒªæº–å‚™</li>
<li>App2Containerã®åˆ©ç”¨</li>
</ul>
<p>å›³ã«ã™ã‚‹ã¨ã€ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚Šã¾ã™ã€‚
<figure><a href="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img5.png">
    <img src="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img5.png"
         alt="img5"/> </a>
</figure>
</p>
<h1 id="app2containerã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—">App2Containerã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&amp;ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</h1>
<p>ä»Šå›ã®ä½œæ¥­ã¯ã€Cloud9(Ubuntu)ã‚’ä½¿ã„å®Ÿæ–½ã—ã¾ã—ãŸã€‚
Cloud9ã®ã‚·ã‚§ãƒ«ã§ä½œæ¥­ã—ã¾ã™ã€‚</p>
<figure><a href="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img3.png">
    <img src="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img3.png"
         alt="img3"/> </a>
</figure>

<p>App2Containerã¯çµæ§‹ãªãƒ‡ã‚£ã‚¹ã‚¯ã‚’ä½¿ã„ã¾ã™(docker imagesãŒåˆ©ç”¨)ã€‚
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®EBSãƒ‡ã‚£ã‚¹ã‚¯ã‚µã‚¤ã‚ºãŒå°ã•ã‹ã£ãŸãŸã‚ã€äº‹å‰ã«EBSã‚µã‚¤ã‚ºã‚’10GBã‹ã‚‰300GBã¸æ‹¡å¼µã—ã¦ã„ã¾ã™ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pip3 install --user --upgrade boto3
$ export instance_id<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>curl -s http://169.254.169.254/latest/meta-data/instance-id<span style="color:#66d9ef">)</span>
$ python -c <span style="color:#e6db74">&#34;import boto3
</span><span style="color:#e6db74">import os
</span><span style="color:#e6db74">from botocore.exceptions import ClientError 
</span><span style="color:#e6db74">ec2 = boto3.client(&#39;ec2&#39;)
</span><span style="color:#e6db74">volume_info = ec2.describe_volumes(
</span><span style="color:#e6db74">    Filters=[
</span><span style="color:#e6db74">        {
</span><span style="color:#e6db74">            &#39;Name&#39;: &#39;attachment.instance-id&#39;,
</span><span style="color:#e6db74">            &#39;Values&#39;: [
</span><span style="color:#e6db74">                os.getenv(&#39;instance_id&#39;)
</span><span style="color:#e6db74">            ]
</span><span style="color:#e6db74">        }
</span><span style="color:#e6db74">    ]
</span><span style="color:#e6db74">)
</span><span style="color:#e6db74">volume_id = volume_info[&#39;Volumes&#39;][0][&#39;VolumeId&#39;]
</span><span style="color:#e6db74">try:
</span><span style="color:#e6db74">    resize = ec2.modify_volume(    
</span><span style="color:#e6db74">            VolumeId=volume_id,    
</span><span style="color:#e6db74">            Size=300
</span><span style="color:#e6db74">    )
</span><span style="color:#e6db74">    print(resize)
</span><span style="color:#e6db74">except ClientError as e:
</span><span style="color:#e6db74">    if e.response[&#39;Error&#39;][&#39;Code&#39;] == &#39;InvalidParameterValue&#39;:
</span><span style="color:#e6db74">        print(&#39;ERROR MESSAGE: {}&#39;.format(e))&#34;</span>
<span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> $? -eq <span style="color:#ae81ff">0</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
    sudo reboot
<span style="color:#66d9ef">fi</span>
</code></pre></div><p>å†èµ·å‹•(reboot)å¾Œã€å†ã³Cloud9ã®ã‚·ã‚§ãƒ«ã«æˆ»ã‚Šã¾ã™ã€‚
App2Container(ã‚³ãƒãƒ³ãƒ‰)ã®å®Ÿè¡Œã¯rootæ¨©é™ãŒå¿…è¦ãªã®ã§ã€ä»¥é™ã¯rootæ˜‡æ ¼ã—ã¦ä½œæ¥­ã—ã¦ã„ã¾ã™ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo su -
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:~# df -h
Filesystem      Size  Used Avail Use% Mounted on
<span style="color:#f92672">(</span>snip<span style="color:#f92672">)</span>
/dev/nvme0n1p1  291G  8.6G  283G   3% /
<span style="color:#f92672">(</span>snip<span style="color:#f92672">)</span>
</code></pre></div><p>App2Containerã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:~# curl -o AWSApp2Container-installer-linux.tar.gz https://app2container-release-us-east-1.s3.us-east-1.amazonaws.com/latest/linux/AWSApp2Container-installer-linux.tar.gz
<span style="color:#f92672">(</span>snip<span style="color:#f92672">)</span>
</code></pre></div><p>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è§£å‡ã—ã¦ã€è§£å‡ã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ç§»å‹•ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:~# tar xvf AWSApp2Container-installer-linux.tar.gz
install.sh
README
termsandconditions.txt
security/
security/app2container.cert
security/app2container.sig
AWSApp2Container.tar.gz
</code></pre></div><p>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã€‚é€”ä¸­ã€åˆ©ç”¨è¦ç´„ã«åŒæ„ã™ã‚‹ã‹èã‹ã‚Œã‚‹ã®ã§ã€Œyã€ã‚’æŠ¼ã—ã¦ç¶™ç¶šã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:~# ./install.sh 
Determining user ...
Determining Installer Path ...
Checking the current installed A2C version
The AWS App2Container tool is licensed as <span style="color:#e6db74">&#34;AWS Content&#34;</span> under the terms and conditions of the AWS Customer Agreement, located at https://aws.amazon.com/agreement and the Service Terms, located at https://aws.amazon.com/service-terms. By installing, using or accessing the AWS App2Container tool, you agree to such terms and conditions. The term <span style="color:#e6db74">&#34;AWS Content&#34;</span> does not include software and assets distributed under separate license terms <span style="color:#f92672">(</span>such as code licensed under an open source license<span style="color:#f92672">)</span>.
Do you accept the terms and conditions above? <span style="color:#f92672">(</span>y/n<span style="color:#f92672">)</span>: y
Installing AWS App2Container ...
AWSApp2Container/
AWSApp2Container/THIRD_PARTY_LICENSES

<span style="color:#f92672">(</span>snip<span style="color:#f92672">)</span>

Installation of AWS App2Container completed successfully!
You are currently running version 1.13.
To get started, run <span style="color:#e6db74">&#39;sudo app2container init&#39;</span>
AWS App2Container was installed under /usr/local/app2container/AWSApp2Container.
</code></pre></div><p>App2Containerã‚³ãƒãƒ³ãƒ‰ãŒä½¿ç”¨ã§ãã‚Œã°ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:~# app2container help
app2container is an application from Amazon Web Services <span style="color:#f92672">(</span>AWS<span style="color:#f92672">)</span>,
that provides commands to discover and containerize applications.

Commands 
  Getting Started ğŸŒ±
    init                  Sets up workspace <span style="color:#66d9ef">for</span> artifacts.
 
 <span style="color:#f92672">(</span>snip<span style="color:#f92672">)</span>
</code></pre></div><p>æ¬¡ã«ã€App2Containerã‚’åˆæœŸåŒ–ã—ã¾ã™ã€‚App2Containerã¯AWS CLIã‚’ä½¿ã†ãŸã‚ã€äº‹å‰ã«ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚è¨­å®šã—ã¦ãŠãã¾ã™ã€‚æˆæœç‰©ã‚’æ ¼ç´ã™ã‚‹S3ãƒã‚±ãƒƒãƒˆã‚‚é©å½“ã«æº–å‚™ã—ã¦ãŠãã¾ã™ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:~# aws configure
AWS Access Key ID <span style="color:#f92672">[</span>None<span style="color:#f92672">]</span>: <span style="color:#e6db74">&lt;&lt;Your Access Key&gt;&gt;
</span><span style="color:#e6db74">AWS Secret Access Key [None]: &lt;&lt;Your</span> Secret Key&gt;&gt;
Default region name <span style="color:#f92672">[</span>None<span style="color:#f92672">]</span>: ap-northeast-1
Default output format <span style="color:#f92672">[</span>None<span style="color:#f92672">]</span>: 
</code></pre></div><p>initã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§App2Containerã®åˆæœŸåŒ–ã€‚ä½¿ã£ãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ä¸‹è¨˜ã€‚(AWSã¸ã®ãƒ¬ãƒãƒ¼ãƒˆã¯ã€Œyã€ã§è‰¯ã‹ã£ãŸã‹ã‚‚^^;;)</p>
<table>
<thead>
<tr>
<th>Patam</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Workspace directory path</td>
<td>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ(/root/app2container)</td>
</tr>
<tr>
<td>AWS Profile</td>
<td>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ(defalut)</td>
</tr>
<tr>
<td>Optional S3 bucket for application artifacts</td>
<td>é©å½“ãªS3ãƒã‚±ãƒƒãƒˆæŒ‡å®š</td>
</tr>
<tr>
<td>Report usage metrics to AWS?</td>
<td>n</td>
</tr>
<tr>
<td>Automatically upload logs and App2Container generated artifacts on crashes and internal errors?</td>
<td>n</td>
</tr>
<tr>
<td>Require images to be signed using Docker Content Trust (DCT)?</td>
<td>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ(n)</td>
</tr>
</tbody>
</table>
<p>ä»¥ä¸Šã§App2Containerã®ä½¿ç”¨æº–å‚™ã¯å®Œäº†ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:~# app2container init
Workspace directory path <span style="color:#66d9ef">for</span> artifacts<span style="color:#f92672">[</span>default: /root/app2container<span style="color:#f92672">]</span>: 
AWS Profile <span style="color:#f92672">(</span>configured using <span style="color:#e6db74">&#39;aws configure --profile&#39;</span><span style="color:#f92672">)[</span>default: default<span style="color:#f92672">]</span>: 
Optional S3 bucket <span style="color:#66d9ef">for</span> application artifacts: t-tkm-app2container
Report usage metrics to AWS? <span style="color:#f92672">(</span>Y/N<span style="color:#f92672">)[</span>default: y<span style="color:#f92672">]</span>: n
Automatically upload logs and App2Container generated artifacts on crashes and internal errors? <span style="color:#f92672">(</span>Y/N<span style="color:#f92672">)[</span>default: y<span style="color:#f92672">]</span>: n
Require images to be signed using Docker Content Trust <span style="color:#f92672">(</span>DCT<span style="color:#f92672">)</span>? <span style="color:#f92672">(</span>Y/N<span style="color:#f92672">)[</span>default: n<span style="color:#f92672">]</span>: 
Configuration saved
All application artifacts will be created under /root/app2container. Please ensure that the folder permissions are secure.
</code></pre></div><h2 id="tomcatã‚¢ãƒ—ãƒªæº–å‚™">Tomcatã‚¢ãƒ—ãƒªæº–å‚™</h2>
<p>ä»Šå›ã¯ã€APTãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã‚ãšã€ä¸€èˆ¬çš„ãªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’è¡Œã„ã¾ã—ãŸã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:~# VERSION<span style="color:#f92672">=</span>9.0.59
root@ip-10-0-1-112:~# wget https://www-eu.apache.org/dist/tomcat/tomcat-9/v<span style="color:#e6db74">${</span>VERSION<span style="color:#e6db74">}</span>/bin/apache-tomcat-<span style="color:#e6db74">${</span>VERSION<span style="color:#e6db74">}</span>.tar.gz
<span style="color:#f92672">(</span>snip<span style="color:#f92672">)</span>
root@ip-10-0-1-112:~# sudo useradd -m -U -d /opt/tomcat -s /bin/false tomcat
root@ip-10-0-1-112:~# tar -xf ./apache-tomcat-<span style="color:#e6db74">${</span>VERSION<span style="color:#e6db74">}</span>.tar.gz -C /opt/tomcat/
root@ip-10-0-1-112:~# chown -R tomcat: /opt/tomcat
root@ip-10-0-1-112:~# ln -s /opt/tomcat/apache-tomcat-<span style="color:#e6db74">${</span>VERSION<span style="color:#e6db74">}</span> /opt/tomcat/latest
root@ip-10-0-1-112:/opt/tomcat# vi /etc/systemd/system/tomcat.service
</code></pre></div><p>ãƒ¯ãƒ³ã‚·ãƒ§ãƒƒãƒˆã§è©¦ã™ã ã‘ãªã®ã§ã€(/opt/tomcat/latest/bin/startup.shã®)ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œã ã‘ã§è‰¯ãã€ã‚µãƒ¼ãƒ“ã‚¹åŒ–ã¯ä¸è¦ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€å¿µã®ç‚ºUnitãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ä½œæˆã€‚</p>
<p><strong>tomcat.service</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vim" data-lang="vim">[<span style="color:#a6e22e">Unit</span>]<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#a6e22e">Description</span>=<span style="color:#a6e22e">Tomcat</span> <span style="color:#ae81ff">9</span> <span style="color:#a6e22e">servlet</span> <span style="color:#a6e22e">container</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#a6e22e">After</span>=<span style="color:#a6e22e">network</span>.<span style="color:#a6e22e">target</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>[<span style="color:#a6e22e">Service</span>]<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#a6e22e">Type</span>=<span style="color:#a6e22e">forking</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#a6e22e">User</span>=<span style="color:#a6e22e">tomcat</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#a6e22e">Group</span>=<span style="color:#a6e22e">tomcat</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#a6e22e">Environment</span>=<span style="color:#e6db74">&#34;JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64&#34;</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#a6e22e">Environment</span>=<span style="color:#e6db74">&#34;JAVA_OPTS=-Djava.security.egd=file:///dev/urandom -Djava.awt.headless=true&#34;</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#a6e22e">Environment</span>=<span style="color:#e6db74">&#34;CATALINA_BASE=/opt/tomcat/latest&#34;</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#a6e22e">Environment</span>=<span style="color:#e6db74">&#34;CATALINA_HOME=/opt/tomcat/latest&#34;</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#a6e22e">Environment</span>=<span style="color:#e6db74">&#34;CATALINA_PID=/opt/tomcat/latest/temp/tomcat.pid&#34;</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#a6e22e">Environment</span>=<span style="color:#e6db74">&#34;CATALINA_OPTS=-Xms512M -Xmx1024M -server -XX:+UseParallelGC&#34;</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#a6e22e">ExecStart</span>=<span style="color:#e6db74">/opt/</span><span style="color:#a6e22e">tomcat</span><span style="color:#e6db74">/latest/</span><span style="color:#a6e22e">bin</span>/<span style="color:#a6e22e">startup</span>.<span style="color:#a6e22e">sh</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#a6e22e">ExecStop</span>=<span style="color:#e6db74">/opt/</span><span style="color:#a6e22e">tomcat</span><span style="color:#e6db74">/latest/</span><span style="color:#a6e22e">bin</span>/<span style="color:#a6e22e">shutdown</span>.<span style="color:#a6e22e">sh</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>[<span style="color:#a6e22e">Install</span>]<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#a6e22e">WantedBy</span>=<span style="color:#a6e22e">multi</span>-<span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">target</span><span style="color:#960050;background-color:#1e0010">
</span></code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:/opt/tomcat# systemctl daemon-reload
root@ip-10-0-1-112:/opt/tomcat# systemctl enable --now tomcat
Created symlink /etc/systemd/system/multi-user.target.wants/tomcat.service â†’ /etc/systemd/system/tomcat.service.
</code></pre></div><p>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã—ã¦ã€ã“ã¡ã‚‰ã®ã‚µãƒ³ãƒ—ãƒ«warã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã€‚</p>
<p><a href="https://tomcat.apache.org/tomcat-7.0-doc/appdev/sample/">https://tomcat.apache.org/tomcat-7.0-doc/appdev/sample/</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:/opt/tomcat/latest/webapps# ll
total <span style="color:#ae81ff">28</span>
drwxr-x---  <span style="color:#ae81ff">7</span> tomcat tomcat <span style="color:#ae81ff">4096</span> Feb <span style="color:#ae81ff">21</span> 21:01 ./
drwxr-xr-x  <span style="color:#ae81ff">9</span> tomcat tomcat <span style="color:#ae81ff">4096</span> Mar  <span style="color:#ae81ff">6</span> 05:44 ../
drwxr-x---  <span style="color:#ae81ff">3</span> tomcat tomcat <span style="color:#ae81ff">4096</span> Mar  <span style="color:#ae81ff">6</span> 05:44 ROOT/
drwxr-x--- <span style="color:#ae81ff">15</span> tomcat tomcat <span style="color:#ae81ff">4096</span> Mar  <span style="color:#ae81ff">6</span> 05:44 docs/
drwxr-x---  <span style="color:#ae81ff">7</span> tomcat tomcat <span style="color:#ae81ff">4096</span> Mar  <span style="color:#ae81ff">6</span> 05:44 examples/
drwxr-x---  <span style="color:#ae81ff">6</span> tomcat tomcat <span style="color:#ae81ff">4096</span> Mar  <span style="color:#ae81ff">6</span> 05:44 host-manager/
drwxr-x---  <span style="color:#ae81ff">6</span> tomcat tomcat <span style="color:#ae81ff">4096</span> Mar  <span style="color:#ae81ff">6</span> 05:44 manager/

root@ip-10-0-1-112:/opt/tomcat/latest/webapps# wget https://tomcat.apache.org/tomcat-7.0-doc/appdev/sample/sample.war

root@ip-10-0-1-112:/opt/tomcat/latest/webapps# ll
total <span style="color:#ae81ff">40</span>
drwxr-x---  <span style="color:#ae81ff">8</span> tomcat tomcat <span style="color:#ae81ff">4096</span> Mar  <span style="color:#ae81ff">6</span> 05:57 ./
drwxr-xr-x  <span style="color:#ae81ff">9</span> tomcat tomcat <span style="color:#ae81ff">4096</span> Mar  <span style="color:#ae81ff">6</span> 05:44 ../
drwxr-x---  <span style="color:#ae81ff">3</span> tomcat tomcat <span style="color:#ae81ff">4096</span> Mar  <span style="color:#ae81ff">6</span> 05:44 ROOT/
drwxr-x--- <span style="color:#ae81ff">15</span> tomcat tomcat <span style="color:#ae81ff">4096</span> Mar  <span style="color:#ae81ff">6</span> 05:44 docs/
drwxr-x---  <span style="color:#ae81ff">7</span> tomcat tomcat <span style="color:#ae81ff">4096</span> Mar  <span style="color:#ae81ff">6</span> 05:44 examples/
drwxr-x---  <span style="color:#ae81ff">6</span> tomcat tomcat <span style="color:#ae81ff">4096</span> Mar  <span style="color:#ae81ff">6</span> 05:44 host-manager/
drwxr-x---  <span style="color:#ae81ff">6</span> tomcat tomcat <span style="color:#ae81ff">4096</span> Mar  <span style="color:#ae81ff">6</span> 05:44 manager/
drwxr-x---  <span style="color:#ae81ff">5</span> tomcat tomcat <span style="color:#ae81ff">4096</span> Mar  <span style="color:#ae81ff">6</span> 05:57 sample/
-rw-r--r--  <span style="color:#ae81ff">1</span> root   root   <span style="color:#ae81ff">4606</span> Mar <span style="color:#ae81ff">31</span>  <span style="color:#ae81ff">2012</span> sample.war
</code></pre></div><p>å‹•ä½œç¢ºèªã—ã¾ã™ã€‚GUIã®ç¢ºèªã¯ã€Cloud9ã®Previewæ©Ÿèƒ½ãŒä½¿ãˆã¾ã™ã€‚ä½†ã—ã€ä»»æ„ã®ãƒãƒ¼ãƒˆç•ªå·ãŒä½¿ãˆã‚‹ã®ã§ãªãã€ä¸‹è¨˜3ãƒãƒ¼ãƒˆã«é™ã‚‰ã‚Œã¦ã„ã‚‹ã‚ˆã†ãªç‚¹ã«æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚</p>
<blockquote>
<p>IDE å†…ã‹ã‚‰ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹ã«ã¯ã€ã¾ãšãƒãƒ¼ãƒˆ 8080ã€8081ã€ã¾ãŸã¯8082 ã‚’çµŒç”±ã—ã¦ã€IP 127.0.0.1ã€localhost ã¾ãŸã¯ 0.0.0.0 ã§ HTTP ã‚’ä½¿ç”¨ã—ã¦ã€AWS Cloud9é–‹ç™ºç’°å¢ƒã§å®Ÿè¡Œã—ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
</blockquote>
<p><a href="https://docs.aws.amazon.com/ja_jp/cloud9/latest/user-guide/app-preview.html#app-preview-run-app">https://docs.aws.amazon.com/ja_jp/cloud9/latest/user-guide/app-preview.html#app-preview-run-app</a></p>
<figure><a href="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img10.png">
    <img src="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img10.png"
         alt="img10"/> </a>
</figure>

<p>åˆ¥ã‚¿ãƒ–(ã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦)ã§è¡¨ç¤ºã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼
<figure><a href="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img11.png">
    <img src="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img11.png"
         alt="img11"/> </a>
</figure>
</p>
<h2 id="springbootã‚¢ãƒ—ãƒªæº–å‚™">SpringBootã‚¢ãƒ—ãƒªæº–å‚™</h2>
<p>Spring Bootã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«ã¯ã€SDKMAN!ã‚’åˆ©ç”¨ã—ã¾ã—ãŸã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:~# curl -s <span style="color:#e6db74">&#34;https://get.sdkman.io&#34;</span> | bash

root@ip-10-0-1-112:~# source <span style="color:#e6db74">&#34;</span>$HOME<span style="color:#e6db74">/.sdkman/bin/sdkman-init.sh&#34;</span>

root@ip-10-0-1-112:~# sdk list springboot
<span style="color:#f92672">================================================================================</span>
Available Springboot Versions
<span style="color:#f92672">================================================================================</span>
     2.6.4               2.3.4.RELEASE       2.0.8.RELEASE       1.4.1.RELEASE  
     2.6.3               2.3.3.RELEASE       2.0.7.RELEASE       1.4.0.RELEASE  
     2.6.2               2.3.2.RELEASE       2.0.6.RELEASE       1.3.8.RELEASE  
<span style="color:#f92672">(</span>snip<span style="color:#f92672">)</span>
     2.3.7.RELEASE       2.1.1.RELEASE       1.4.4.RELEASE       1.0.1.RELEASE  
     2.3.6.RELEASE       2.1.0.RELEASE       1.4.3.RELEASE       1.0.0.RELEASE  
     2.3.5.RELEASE       2.0.9.RELEASE       1.4.2.RELEASE                      

<span style="color:#f92672">================================================================================</span>
+ - local version
* - installed
&gt; - currently in use
<span style="color:#f92672">================================================================================</span>

root@ip-10-0-1-112:~# sdk install springboot
<span style="color:#f92672">(</span>snip<span style="color:#f92672">)</span>

</code></pre></div><p>ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã¯ã€ä¸‹è¨˜ã‚’ä½¿ã„ã¾ã™ã€‚</p>
<p><a href="https://spring.pleiades.io/spring-boot/docs/current/reference/html/cli.html#cli.using-the-cli.run">2.1. CLI ã‚’ä½¿ç”¨ã—ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œ</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:~# cat hello.groovy 
@RestController
class WebApplication <span style="color:#f92672">{</span>
    @RequestMapping<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/&#34;</span><span style="color:#f92672">)</span>
    String home<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#e6db74">&#34;Hello World!&#34;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>ãƒãƒ¼ãƒˆã¯ã€tomcat(8080)ã¨è¢«ã‚‰ãªã„ã‚ˆã†ã«8081ã§èµ·å‹•ã—ã¾ã™ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:~# spring run hello.groovy -- --server.port<span style="color:#f92672">=</span><span style="color:#ae81ff">8081</span>

  .   ____          _            __ _ _
 /<span style="color:#ae81ff">\\</span> / ___<span style="color:#e6db74">&#39;_ __ _ _(_)_ __  __ _ \ \ \ \
</span><span style="color:#e6db74">( ( )\___ | &#39;</span>_ | <span style="color:#e6db74">&#39;_| | &#39;</span>_ <span style="color:#ae81ff">\/</span> _<span style="color:#e6db74">`</span> | <span style="color:#ae81ff">\ \ \ \
</span><span style="color:#ae81ff"></span> <span style="color:#ae81ff">\\</span>/  ___<span style="color:#f92672">)</span>| |_<span style="color:#f92672">)</span>| | | | | <span style="color:#f92672">||</span> <span style="color:#f92672">(</span>_| |  <span style="color:#f92672">)</span> <span style="color:#f92672">)</span> <span style="color:#f92672">)</span> <span style="color:#f92672">)</span>
  <span style="color:#960050;background-color:#1e0010">&#39;</span>  |____| .__|_| |_|_| |_<span style="color:#ae81ff">\_</span>_, | / / / /
 <span style="color:#f92672">=========</span>|_|<span style="color:#f92672">==============</span>|___/<span style="color:#f92672">=</span>/_/_/_/
 :: Spring Boot ::                <span style="color:#f92672">(</span>v2.6.4<span style="color:#f92672">)</span>

2022-03-06 08:27:48.301  INFO <span style="color:#ae81ff">3803</span> --- <span style="color:#f92672">[</span>       runner-0<span style="color:#f92672">]</span> o.s.boot.SpringApplication               : Starting application using Java 11.0.13 on ip-10-0-1-112 with PID <span style="color:#ae81ff">3803</span> <span style="color:#f92672">(</span>started by root in /root<span style="color:#f92672">)</span>
2022-03-06 08:27:48.307  INFO <span style="color:#ae81ff">3803</span> --- <span style="color:#f92672">[</span>       runner-0<span style="color:#f92672">]</span> o.s.boot.SpringApplication               : No active profile set, falling back to <span style="color:#ae81ff">1</span> default profile: <span style="color:#e6db74">&#34;default&#34;</span>
2022-03-06 08:27:50.482  INFO <span style="color:#ae81ff">3803</span> --- <span style="color:#f92672">[</span>       runner-0<span style="color:#f92672">]</span> o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>: <span style="color:#ae81ff">8081</span> <span style="color:#f92672">(</span>http<span style="color:#f92672">)</span>
<span style="color:#ae81ff">202</span>
<span style="color:#f92672">(</span>snip<span style="color:#f92672">)</span>
</code></pre></div><p>å‹•ä½œç¢ºèªã—ã¾ã™ã€‚å¤§ä¸ˆå¤«ã®ã‚ˆã†ã§ã™ã€‚
<figure><a href="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img12.png">
    <img src="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img12.png"
         alt="img12"/> </a>
</figure>
</p>
<h2 id="app2containerã®åˆ©ç”¨">App2Containerã®åˆ©ç”¨</h2>
<p>æº–å‚™ãŒã§ããŸã®ã§ã€æ—©é€Ÿã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’inventoryã—ã¦ã¿ã¾ã™ã€‚ç„¡äº‹ã«æ¤œå‡ºã§ãã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:~# app2container inventory
<span style="color:#f92672">{</span>
                <span style="color:#e6db74">&#34;java-generic-6ef9339e&#34;</span>: <span style="color:#f92672">{</span>
                                <span style="color:#e6db74">&#34;processId&#34;</span>: 6120,
                                <span style="color:#e6db74">&#34;cmdline&#34;</span>: <span style="color:#e6db74">&#34;/usr/lib/jvm/java-11-openjdk-amd64/bin/java ... run hello.groovy -- --server.port=8081 &#34;</span>,
                                <span style="color:#e6db74">&#34;applicationType&#34;</span>: <span style="color:#e6db74">&#34;java-generic&#34;</span>,
                                <span style="color:#e6db74">&#34;webApp&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
                <span style="color:#f92672">}</span>,
                <span style="color:#e6db74">&#34;java-tomcat-5da060de&#34;</span>: <span style="color:#f92672">{</span>
                                <span style="color:#e6db74">&#34;processId&#34;</span>: 4672,
                                <span style="color:#e6db74">&#34;cmdline&#34;</span>: <span style="color:#e6db74">&#34;/usr/lib/jvm/java-11-openjdk-amd64/bin/java ... -Dcatalina.home=/opt/tomcat/latest -Djava.io.tmpdir=/opt/tomcat/latest/temp org.apache.catalina.startup.Bootstrap start &#34;</span>,
                                <span style="color:#e6db74">&#34;applicationType&#34;</span>: <span style="color:#e6db74">&#34;java-tomcat&#34;</span>,
                                <span style="color:#e6db74">&#34;webApp&#34;</span>: <span style="color:#e6db74">&#34;sample&#34;</span>
                <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>2ã¤ã®javaã‚¢ãƒ—ãƒªãŒæ¤œå‡ºã•ã‚Œã€idãŒä»˜ä¸ã•ã‚Œã¦ã„ã¾ã™ã€‚
<figure><a href="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img1.png">
    <img src="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img1.png"
         alt="img1"/> </a>
</figure>
</p>
<p>æ¬¡ã«ã€ãã‚Œãã‚Œã®ã‚¢ãƒ—ãƒªã‚’åˆ†æ(analyze)ã—ã¾ã™ã€‚ã“ã®ä½œæ¥­ã¯ä¸€ç¬ã§å®Œäº†ã—ã¾ã™ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:~# app2container analyze --application-id java-tomcat-5da060de
âœ” Created artifacts folder /root/app2container/java-tomcat-5da060de
âœ” Generated analysis data in /root/app2container/java-tomcat-5da060de/analysis.json
ğŸ‘ Analysis successful <span style="color:#66d9ef">for</span> application java-tomcat-5da060de

ğŸ’¡ Next Steps:
1. View the application analysis file at /root/app2container/java-tomcat-5da060de/analysis.json.
2. Edit the application analysis file as needed.
3. Start the containerization process using this command: app2container containerize --application-id java-tomcat-5da060de
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:~# app2container analyze --application-id java-generic-6ef9339e
âœ” Created artifacts folder /root/app2container/java-generic-6ef9339e
âœ” Generated analysis data in /root/app2container/java-generic-6ef9339e/analysis.json
ğŸ‘ Analysis successful <span style="color:#66d9ef">for</span> application java-generic-6ef9339e

ğŸ’¡ Next Steps:
1. View the application analysis file at /root/app2container/java-generic-6ef9339e/analysis.json.
2. Edit the application analysis file as needed.
3. Start the containerization process using this command: app2container containerize --application-id java-generic-6ef9339e
</code></pre></div><p>åˆ†æã®çµæœã€work directory(ex. app2container)ã«JSONãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¾ã™ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:~# ll app2container/
total <span style="color:#ae81ff">20</span>
drwxr-xr-x  <span style="color:#ae81ff">5</span> root root <span style="color:#ae81ff">4096</span> Mar  <span style="color:#ae81ff">6</span> 06:14 ./
drwx------ <span style="color:#ae81ff">12</span> root root <span style="color:#ae81ff">4096</span> Mar  <span style="color:#ae81ff">6</span> 06:07 ../
drwxr-xr-x  <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Mar  <span style="color:#ae81ff">6</span> 06:14 java-generic-6ef9339e/
drwxr-xr-x  <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Mar  <span style="color:#ae81ff">6</span> 06:13 java-tomcat-5da060de/
drwxr-xr-x  <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Mar  <span style="color:#ae81ff">6</span> 05:36 log/
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#treeãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</span>
root@ip-10-0-1-112:~# apt install tree
<span style="color:#f92672">(</span>snip<span style="color:#f92672">)</span>

root@ip-10-0-1-112:~# tree app2container/java-tomcat-5da060de/
app2container/java-tomcat-5da060de/
â””â”€â”€ analysis.json
root@ip-10-0-1-112:~# tree app2container/java-generic-6ef9339e/
app2container/java-generic-6ef9339e/
â””â”€â”€ analysis.json
</code></pre></div><p>åˆ†æã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã¯ã€ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ãªã©ã¯ä½œæˆã•ã‚Œã¾ã›ã‚“ã€‚(Cloud9(Ubuntu)ä½œæˆæ™‚ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§pullã•ã‚Œã¦ã„ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ã¿)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:~# docker image ls
REPOSITORY      TAG          IMAGE ID       CREATED         SIZE
lambci/lambda   python3.8    <span style="color:#ae81ff">094248252696</span>   <span style="color:#ae81ff">13</span> months ago   524MB
lambci/lambda   nodejs12.x   22a4ada8399c   <span style="color:#ae81ff">13</span> months ago   390MB
lambci/lambda   nodejs10.x   db93be728e7b   <span style="color:#ae81ff">13</span> months ago   385MB
lambci/lambda   python3.7    22b4b6fd9260   <span style="color:#ae81ff">13</span> months ago   946MB
lambci/lambda   python3.6    177c85a10179   <span style="color:#ae81ff">13</span> months ago   894MB
lambci/lambda   python2.7    d96a01fe4c80   <span style="color:#ae81ff">13</span> months ago   763MB
lambci/lambda   nodejs8.10   5754fee26e6e   <span style="color:#ae81ff">13</span> months ago   813MB
</code></pre></div><p>tomcatã‚¢ãƒ—ãƒªã®ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œæˆã—ã¾ã™(5åˆ†ã»ã©ã‹ã‹ã‚Šã¾ã—ãŸ)ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:~# app2container containerize --application-id java-tomcat-5da060de
âœ” AWS prerequisite check succeeded
âœ” Docker prerequisite check succeeded
âœ” Extracted container artifacts <span style="color:#66d9ef">for</span> application
âœ” Entry file generated
âœ” Dockerfile generated under /root/app2container/java-tomcat-5da060de/Artifacts
âœ” Generated dockerfile.update under /root/app2container/java-tomcat-5da060de/Artifacts
âœ” Generated deployment file at /root/app2container/java-tomcat-5da060de/deployment.json
âœ” Deployment artifacts generated.
âœ” Pre-validation succeeded.
ğŸ‘ Containerization successful. Generated docker image java-tomcat-5da060de

ğŸ’¡ You<span style="color:#e6db74">&#39;re all set to test and deploy your container image.
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">Next Steps:
</span><span style="color:#e6db74">1. View the container image with &#34;docker images&#34; and test the application with &#34;docker run --name java-tomcat-5da060de -Pit java-tomcat-5da060de&#34;.
</span><span style="color:#e6db74">2. When you&#39;</span>re ready to deploy to AWS, adjust the appropriate fields in /root/app2container/java-tomcat-5da060de/deployment.json to generate the desired deployment artifact. Note that by default <span style="color:#e6db74">&#34;createEcsArtifacts&#34;</span> is set to true.
3. Generate deployment artifacts using <span style="color:#e6db74">&#34;app2container generate app-deployment --application-id java-tomcat-5da060de&#34;</span>.
</code></pre></div><p>æˆæœç‰©(work directory)ã¨ã€ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:~# tree app2container/java-tomcat-5da060de/
app2container/java-tomcat-5da060de/
â”œâ”€â”€ Artifacts
â”‚Â Â  â”œâ”€â”€ ContainerFiles.tar
â”‚Â Â  â”œâ”€â”€ Dockerfile
â”‚Â Â  â”œâ”€â”€ Dockerfile.update
â”‚Â Â  â”œâ”€â”€ entryfile
â”‚Â Â  â”œâ”€â”€ excludedFiles
â”‚Â Â  â””â”€â”€ includeFiles
â”œâ”€â”€ analysis.json
â””â”€â”€ deployment.json

<span style="color:#ae81ff">1</span> directory, <span style="color:#ae81ff">8</span> files
</code></pre></div><p>802MBã®ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ãŒç”Ÿæˆã•ã‚Œã¾ã—ãŸã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:~# docker image ls
REPOSITORY             TAG          IMAGE ID       CREATED              SIZE
java-tomcat-5da060de   latest       cc2de1db6ef8   About a minute ago   802MB
ubuntu                 18.04        eb2556e0f6e4   <span style="color:#ae81ff">2</span> days ago           63.2MB
<span style="color:#f92672">(</span>snip<span style="color:#f92672">)</span>
</code></pre></div><p>ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å‹•ä½œã‚’ç¢ºèªã—ã¾ã™ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:~# docker run -d --rm -p 8082:8080 java-tomcat-5da060de
55dc392f0ee619afb61298b6a2ee05758b495a10c7f6b6bc2eb082d34e2dcd79

root@ip-10-0-1-112:~# docker ps
CONTAINER ID   IMAGE                  COMMAND                  CREATED         STATUS                            PORTS                                                 NAMES
55dc392f0ee6   java-tomcat-5da060de   <span style="color:#e6db74">&#34;/bin/sh -c /entryfiâ€¦&#34;</span>   <span style="color:#ae81ff">3</span> seconds ago   Up <span style="color:#ae81ff">2</span> seconds <span style="color:#f92672">(</span>health: starting<span style="color:#f92672">)</span>   8005/tcp, 0.0.0.0:8082-&gt;8080/tcp, :::8082-&gt;8080/tcp   charming_varahamihira
</code></pre></div><p>å‹•ä½œç¢ºèªã§ãã¾ã—ãŸã€‚
<figure><a href="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img6.png">
    <img src="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img6.png"
         alt="img6"/> </a>
</figure>

<figure><a href="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img7png">
    <img src="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img7.png"
         alt="img7"/> </a>
</figure>
</p>
<p>ãŠç‰‡ä»˜ã‘ã—ã¾ã™(ã‚³ãƒ³ãƒ†ãƒŠå‰Šé™¤)ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:~# docker stop 55d
55d
</code></pre></div><p>æ¬¡ã«ã€springbootã‚¢ãƒ—ãƒªã®ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œæˆã—ã¾ã™(15åˆ†ã€œ20åˆ†ã»ã©ã‹ã‹ã‚Šã¾ã—ãŸ)ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:~# app2container containerize --application-id java-generic-6ef9339e
âœ” AWS prerequisite check succeeded
âœ” Docker prerequisite check succeeded
âœ” Extracted container artifacts <span style="color:#66d9ef">for</span> application
âœ” Entry file generated
âœ” Dockerfile generated under /root/app2container/java-generic-6ef9339e/Artifacts
âœ” Generated dockerfile.update under /root/app2container/java-generic-6ef9339e/Artifacts
âœ” Generated deployment file at /root/app2container/java-generic-6ef9339e/deployment.json
âœ” Deployment artifacts generated.
âœ” Pre-validation succeeded.
ğŸ‘ Containerization successful. Generated docker image java-generic-6ef9339e

ğŸ’¡ You<span style="color:#e6db74">&#39;re all set to test and deploy your container image.
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">Next Steps:
</span><span style="color:#e6db74">1. View the container image with &#34;docker images&#34; and test the application with &#34;docker run --name java-generic-6ef9339e -Pit java-generic-6ef9339e&#34;.
</span><span style="color:#e6db74">2. When you&#39;</span>re ready to deploy to AWS, adjust the appropriate fields in /root/app2container/java-generic-6ef9339e/deployment.json to generate the desired deployment artifact. Note that by default <span style="color:#e6db74">&#34;createEcsArtifacts&#34;</span> is set to true.
3. Generate deployment artifacts using <span style="color:#e6db74">&#34;app2container generate app-deployment --application-id java-generic-6ef9339e&#34;</span>.
</code></pre></div><p>16.1GBã®ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ãŒç”Ÿæˆã•ã‚Œã¾ã—ãŸã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:~# docker image ls
REPOSITORY              TAG          IMAGE ID       CREATED          SIZE
java-generic-6ef9339e   latest       8ef7ef3e7db0   <span style="color:#ae81ff">10</span> minutes ago   16.1GB
java-tomcat-5da060de    latest       cc2de1db6ef8   <span style="color:#ae81ff">30</span> minutes ago   802MB
ubuntu                  18.04        eb2556e0f6e4   <span style="color:#ae81ff">2</span> days ago       63.2MB
<span style="color:#f92672">(</span>snip<span style="color:#f92672">)</span>
</code></pre></div><p>ã“ã‚Œã¯ã€UserGuideã«ã‚‚è¨˜è¼‰ã‚ã‚‹é€šã‚Šã€æ‚²ã‚µãƒãƒ¼ãƒˆãªã‚¢ãƒ—ãƒªã®å ´åˆã¯ä½™è¨ˆãªãƒªã‚½ãƒ¼ã‚¹å«ã‚ã¦ä¸¸ã£ã¨ã‚³ãƒ³ãƒ†ãƒŠåŒ–ã™ã‚‹ãŸã‚ã‚µã‚¤ã‚ºãŒå¤§ãããªã£ã¦ã„ã¾ã™ã€‚</p>
<blockquote>
<p>App2Containerã¯ä¾å­˜é–¢ä¿‚ã‚’è­˜åˆ¥ã™ã‚‹ãŸã‚ã«ä¿å®ˆçš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’å–ã‚Šã¾ã™ã€‚ ã“ã‚Œã¯ã€ãƒ—ãƒ­ã‚»ã‚¹ãƒ¢ãƒ¼ãƒ‰ã¨å‘¼ã°ã‚Œã¾ã™ã€‚ ãƒ—ãƒ­ã‚»ã‚¹ãƒ¢ãƒ¼ãƒ‰ã®å ´åˆã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒãƒ¼ä¸Šã®ã™ã¹ã¦ã®éã‚·ã‚¹ãƒ†ãƒ ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã«å«ã¾ã‚Œã¾ã™ã€‚</p>
</blockquote>
<p>ã“ã¡ã‚‰ã‚‚ã€ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å‹•ä½œã‚’ç¢ºèªã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:~# docker run -d --rm -p 8082:8081 java-generic-6ef9339e                                                                                                                               
7fa1c72fbc37cf4352264622b8c8dae485fdac8fd8041a6aef6b5ec21a1a7073

root@ip-10-0-1-112:~# docker ps
CONTAINER ID   IMAGE                   COMMAND                  CREATED         STATUS                            PORTS                                       NAMES
7fa1c72fbc37   java-generic-6ef9339e   <span style="color:#e6db74">&#34;/bin/sh -c /entryfiâ€¦&#34;</span>   <span style="color:#ae81ff">7</span> seconds ago   Up <span style="color:#ae81ff">6</span> seconds <span style="color:#f92672">(</span>health: starting<span style="color:#f92672">)</span>   0.0.0.0:8082-&gt;8081/tcp, :::8082-&gt;8081/tcp   goofy_tereshkova
</code></pre></div><p>å‹•ä½œç¢ºèªã§ãã¾ã—ãŸã€‚
<figure><a href="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img8.png">
    <img src="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img8.png"
         alt="img8"/> </a>
</figure>

<figure><a href="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img9.png">
    <img src="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img9.png"
         alt="img9"/> </a>
</figure>
</p>
<p>ãŠç‰‡ä»˜ã‘ã—ã¾ã™(ã‚³ãƒ³ãƒ†ãƒŠå‰Šé™¤)ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ip-10-0-1-112:~# docker stop 7fa
7fa
</code></pre></div><p>ä»¥ä¸Šã‚’å›³ã«ã™ã‚‹ã¨ã€ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚Šã¾ã™ã€‚
<figure><a href="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img2.png">
    <img src="https://github.com/t-tkm/blog_images/raw/main/2022/aws_app2container/img2.png"
         alt="img2"/> </a>
</figure>
</p>
<p>éã‚µãƒãƒ¼ãƒˆjavaã‚¢ãƒ—ãƒª(SpringBootã‚¢ãƒ—ãƒª)ã®æ–¹ã¯ã€ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã®ã‚µã‚¤ã‚ºãŒ16.3GBã¨å¤§ããå–ã‚Šå›ã—ãŒé›£ã—ã„ãŸã‚ã€ã‚µã‚¤ã‚ºã‚’å°ã•ãã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ã€æ¬¡ã®è¨˜äº‹ã§ç´¹ä»‹ã—ã¾ã™ã€‚</p>

  </section>
  <footer>
    

    
    <nav class="p-pagination c-pagination">
      <div class="c-pagination__ctrl">
        <div class="c-pagination__newer">
          
          <a href="https://t-tkm.github.io/blog/posts/2022/03/aws_hugo/">Newer</a>
          
        </div>
        <div class="c-pagination__older">
          
          <a href="https://t-tkm.github.io/blog/posts/2022/03/aws_app2container_opt/">Older</a>
          
        </div>
      </div>
    </nav>
    

<section class="p-related">
  <h3>See Also</h3>
  <ul id="slider" class="p-related__list">
    
    <li class="p-related__item js-related__item">
      <a href="/blog/posts/2022/03/aws_app2container_opt/"
        >
        <span>AWS App2Container(ã‚¤ãƒ¡ãƒ¼ã‚¸æœ€é©åŒ–ç·¨)</span>
      </a>
    </li>
    
    <li class="p-related__item js-related__item">
      <a href="/blog/posts/2021/03/minecraft_server_aws_ecs/"
        >
        <span>æˆ‘ãŒå®¶ã®ãƒã‚¤ã‚¯ãƒ©ã‚µãƒ¼ãƒãƒ¼(AWSç·¨)</span>
      </a>
    </li>
    
    <li class="p-related__item js-related__item">
      <a href="/blog/posts/2021/12/aws_books/"
        >
        <span>ã‚¯ãƒ©ã‚¦ãƒ‰æŠ€è¡“æ›¸ç´¹ä»‹(AWS/Azure/2021å¹´ç·¨)</span>
      </a>
    </li>
    
    <li class="p-related__item js-related__item">
      <a href="/blog/posts/2021/12/aws_powerbi/"
        >
        <span>AWS RDS(PostgreSQL)ã¨Power BIã‚’æ¥ç¶šã—ã¦ã¿ãŸ</span>
      </a>
    </li>
    
    <li class="p-related__item js-related__item">
      <a href="/blog/posts/2021/12/aws_cli_2/"
        >
        <span>AWSè²»ç”¨ç›£è¦–ãƒ„ãƒ¼ãƒ«(å¾Œç·¨:Lambdaæ´»ç”¨)</span>
      </a>
    </li>
    
    <li class="p-related__item js-related__item">
      <a href="/blog/posts/2021/12/aws_cli_1/"
        >
        <span>AWSè²»ç”¨ç›£è¦–ãƒ„ãƒ¼ãƒ«(å‰ç·¨:AWS ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã‚³ãƒ³ã‚½ãƒ¼ãƒ«&amp;AWS CLI)</span>
      </a>
    </li>
    
  </ul>
</section>


    
<aside class="p-author">
  
  <div class="c-avatar p-author__avatar">
    <img alt="Author Avatar" src="https://www.gravatar.com/avatar/01f65fbc400bf554d948aec41084a9fa" />
  </div>
  
  
  <div class="p-author__body">
    
    <p class="c-title p-author__name ">Takumi Tomita</p>
    
    
    <p>æ¨ªæµœã§SWã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚„ã£ã¦ã¾ã™ã€‚2021-2023 AWS Ambassadorã«é¸å‡ºã„ãŸã ãã¾ã—ãŸã€‚</p>
    
    
  </div>
  
</aside>


  </footer>
</article>
  </main>
  
<nav class="l-nav p-menu">
  <ul class="p-menu__lists">
    
      
      <li class="p-menu__listitem">
        <a href="/blog/">Blog</a>
      </li>
      
    
      
      <li class="p-menu__listitem">
        <a href="/blog/about">About</a>
      </li>
      
    
      
      <li class="p-menu__listitem">
        <a href="/blog/tags">Tags</a>
      </li>
      
    
  </ul>
</nav>


  <footer class="l-footer">
    
<ul class="c-links">
  
  
  <li class="c-links__item">
    <a href="https://twitter.com/t_tkm0911" target="_blank">
      <svg viewBox="0 0 64 64" class="c-links__icon">
        <title>twitter</title>
        <use xlink:href="#icon-twitter"></use>
      </svg>
    </a>
  </li>
  
  
  <li class="c-links__item">
    <a href="https://facebook.com/takumi.tomita.vf" target="_blank">
      <svg viewBox="0 0 64 64" class="c-links__icon">
        <title>facebook</title>
        <use xlink:href="#icon-facebook"></use>
      </svg>
    </a>
  </li>
  
  
  
  <li class="c-links__item">
    <a href="https://github.com/t-tkm" target="_blank">
      <svg viewBox="0 0 64 64" class="c-links__icon">
        <title>github</title>
        <use xlink:href="#icon-github"></use>
      </svg>
    </a>
  </li>
  
  
  <li class="c-links__item">
    <a href="https://gitlab.com/t-tkm" target="_blank">
      <svg viewBox="0 0 64 64" class="c-links__icon">
        <title>gitlab</title>
        <use xlink:href="#icon-gitlab"></use>
      </svg>
    </a>
  </li>
  
  
  
  
  
  
  
  
  
  
  
  <li class="c-links__item">
    <a href="https://linkedin.com/in/takumitomta" target="_blank">
      <svg viewBox="0 0 64 64" class="c-links__icon">
        <title>linkedin</title>
        <use xlink:href="#icon-linkedin"></use>
      </svg>
    </a>
  </li>
  
  
</ul>



    <p class="p-copyright">
      
        &copy; 2022 Takumi Tomita Powered by Hugo & Pickles.
      
    </p>
  </footer>

</body>
</html>

